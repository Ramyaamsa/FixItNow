<div class="col-sm-12 mt-2">
  <div class="card" [hidden]="isBreakdownDtl">
    <div class="card-header p-2">
      <h3 class="card-title mb-0 mt-1">Breakdown <span class="text-info">(Total Ticket - {{ totalCount }})</span></h3>
      <div class="card-tools d-flex align-items-center">
        <p class="mb-0" (click)="createTicket()" title="Create Ticket" style="font-size: 1.2rem;">
          <i class="fas fa-ticket-alt mr-3"></i>
        </p>
        <!-- <img class="mr-3" src="assets/images/discount-ticket.png" style="cursor: pointer;height: 30px"
          (click)="createTicket()" /> -->
        <p class="mb-0">
          <i class="fas fa-th view-icon" (click)="underDevop()" style="cursor: pointer;"></i>
          <i class="fas fa-list view_icon" (click)="underDevop()" style="cursor: pointer; display: none;"></i>
          <i class="fas fa-table viewIcon ml-3 mr-3" (click)="underDevop()" style="cursor: pointer;"></i>
        </p>
      </div>
    </div>
    <div class="card-body p-2">
      <div class="row" style="align-items: center;justify-content: space-between;">
        <ul class="nav nav-tabs" style="margin-right: 10px;padding-right: 20px;">
          <li class="nav-item" (click)="getBreakdownList('open','')">
            <a class="nav-link active" id="open_tab" data-toggle="pill" role="tab">New {{ openCount }}</a>
          </li>
          <li class="nav-item" (click)="getBreakdownList('assigned','')">
            <a class="nav-link" id="assign_tab" data-toggle="pill" role="tab">Assigned {{ assignCount }}</a>
          </li>
          <li class="nav-item" (click)="getBreakdownList('accepted','')">
            <a class="nav-link" id="accepted_tab" data-toggle="pill" role="tab">Accepted {{ acceptCount }}</a>
          </li>
          <li class="nav-item" (click)="getBreakdownList('on_progress','')">
            <a class="nav-link" id="on_progress_tab" data-toggle="pill" role="tab">On Progress {{ inprogressCount }}</a>
          </li>
          <!-- <li class="nav-item" (click)="getBreakdownList('hold','')">
            <a class="nav-link" id="hold_tab" data-toggle="pill" role="tab">Hold {{ holdCount }}</a>
          </li>
          <li class="nav-item" (click)="getBreakdownList('pending','')">
            <a class="nav-link" id="pending_tab" data-toggle="pill" role="tab">Pending {{ pendingCount }}</a>
          </li> -->
          <li class="nav-item" (click)="getBreakdownList('hold_pending','')">
            <a class="nav-link" id="pending_tab" data-toggle="pill" role="tab">Hold/Pending {{ holdPendingCount }}</a>
          </li>
          <li class="nav-item" (click)="getBreakdownList('acknowledge','')">
            <a class="nav-link" id="acknowledge_tab" data-toggle="pill" role="tab">Acknowledge {{ completedCount }}</a>
          </li>
          <li class="nav-item" (click)="getBreakdownList('closed','')">
            <a class="nav-link" id="completed_tab" data-toggle="pill" role="tab">Closed {{ fixedCount }}</a>
          </li>
        </ul>
      </div>
      <div class="tab-content">
        <div class="col-sm-12 mt-1">
          <div class="row">
            <div class="col-sm-4">
              <div class="form-group row" id="from_date_div">
                <label class="col-sm-4">From </label>
                <div class="col-sm-8 input-group">
                  <input type="text" class="form-control form-control-sm datepicker" id="from_date" name="from_date"
                    value="" />
                  <div class="input-group-append">
                    <div class="input-group-text">
                      <i class="far fa-calendar"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group row" id="to_date_div">
                <label class="col-sm-2">To </label>
                <div class="col-sm-8">
                  <div class="input-group">
                    <input type="text" class="form-control form-control-sm datepicker" id="to_date" name="to_date"
                      value="" />
                    <div class="input-group-append">
                      <div class="input-group-text">
                        <i class="far fa-calendar"></i>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-2">
                  <button type="button" class="btn btn-sm btn-info"
                    (click)="getBreakdownList(lastBreakdownStatusSelect,'')"> Apply
                  </button></div>
              </div>
            </div>
            <div class="col-sm-4">
              <input type="text" id="search_breakdown" [(ngModel)]="searchTerm" (input)="searchBreakdownList()"
                placeholder="Search Breakdown..." class="form-control form-control-sm" />
            </div>
          </div>
        </div>
        <div class="table-responsive" style="height: 78vh;">
          <table class="table table-sm m-0 breakdown-table" id="table_view">
            <thead>
              <tr>
                <th>S.No</th>
                <th><i class="fas fa-ticket-alt mr-2"></i>Ticket</th>
                <th><i class="fas fa-user-clock mr-2"></i>Created</th>
                <th><i class="fas fa-desktop mr-2"></i>Asset</th>
                <th><i class="fas fa-city mr-2"></i>Plant</th>
                <th><i class="fas fa-building mr-2"></i>Department</th>
                <th><i class="fas fa-user mr-2"></i>Assign Engineer</th>
                <th><i class="fab fa-speakap mr-2"></i>Status / Priority</th>
                <th><i class="fas fa-cog mr-2"></i>Operation</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="breakdown_list_tbody">
              <tr *ngFor="let breakdown of breakdownList;let x=index">
                <td>{{ x+1 }}</td>
                <td>
                  <p class="mb-0">{{ breakdown.ticket_no }}</p>
                  <p class="mb-0">{{ breakdown.breakdown_category_name }}</p>
                  <p class="mb-0">{{ breakdown.breakdown_sub_category_name }}</p>
                </td>
                <td>
                  <p class="mb-0">
                    {{ breakdown.current_stop_begin_time | date: 'dd-MM-yyyy HH:mm:ss' }}
                  </p>
                  <p class="mb-0">
                    {{ breakdown.created_by }}
                  </p>
                </td>
                <td>{{ breakdown.asset }}</td>
                <td>{{ breakdown.plant }}</td>
                <td>{{ breakdown.department }}</td>
                <td *ngIf="breakdown.assigned_to_engineer == ''"><span class="text-orange"> Not Assigned </span></td>
                <td *ngIf="breakdown.assigned_to_engineer != ''"><span>{{ breakdown.assigned_to_engineer }}</span></td>
                <td>{{ breakdown.status }} / <span
                    [ngClass]="breakdown.priority == 'High' ? 'text-danger' : breakdown.priority == 'Low' ? 'text-primary' : 'text-orange'">{{ breakdown.priority }}</span>
                </td>
                <td>
                  <button
                    *ngIf="(breakdown.status_id == 1 || breakdown.status_id == 4 || breakdown.status_id == 5 || breakdown.status_id == 12)"
                    type="button" class="btn btn-sm btn-info btn-circle"
                    (click)="loadAssignDiv(breakdown.id, 2,breakdown,breakdown.priority)"
                    [attr.disabled]="(userType != 'Engineer' && userType != 'Operator' && userType != 'Super Admin') ? null : true">
                    <i class="fas fa-user-edit"></i>
                  </button>
                  <div class="btn-group" *ngIf="breakdown.status_id == 2">
                    <button type="button" class="btn btn-sm btn-success"
                      (click)="updateTicket(breakdown.id, 3, breakdown.engineer_id)"
                      [attr.disabled]="(breakdown.engineer_id == loginId || (breakdown.engineer_id == 0 && (userType == 'Engineer' || userType == 'Head/Engineer'))) ? null : true">
                      Accept
                    </button>
                    <button type="button" class="btn btn-sm btn-danger"
                      (click)="openComment(breakdown.id, 4, breakdown.engineer_id, breakdown)"
                      [attr.disabled]="breakdown.engineer_id == loginId ? null : true">Reject
                    </button>
                  </div>
                  <div class="btn-group"
                    *ngIf="breakdown.status_id == 3 || breakdown.status_id == 6 || breakdown.status_id == 8 || breakdown.status_id == 9">
                    <button type="button" class="btn btn-sm"
                      [ngClass]="(breakdown.status_id == 3 || breakdown.status_id == 8 || breakdown.status_id == 9) ? 'btn-success' : 'btn-danger'"
                      (click)="updateTicket(breakdown.id, 6, breakdown.engineer_id)"
                      [attr.disabled]="(breakdown.engineer_id == loginId && breakdown.status_id != 6) ? null : true">
                      Check In</button>
                    <button type="button" class="btn btn-sm"
                      [ngClass]="breakdown.status_id == 6 ? 'btn-success' : 'btn-danger'"
                      (click)="showBreakdownStatus(breakdown.id)"
                      [attr.disabled]="(breakdown.engineer_id == loginId && breakdown.status_id == 6) ? null : true">
                      Check Out</button>
                  </div>
                  <div class="d-flex" *ngIf="breakdown.status_id == 10">
                    <button type="button" class="btn btn-sm btn-success btn-circle mr-2"
                      (click)="openComment(breakdown.id, 11, breakdown.engineer_id, breakdown)"
                      [attr.disabled]="(userType != 'Engineer' && userType != 'Operator' && userType != 'Super Admin') ? null : true">
                      <i class="fas fa-thumbs-up"></i>
                    </button>
                    <button type="button" class="btn btn-sm btn-danger btn-circle"
                      (click)="openComment(breakdown.id, 12, breakdown.engineer_id, breakdown)"
                      [attr.disabled]="(userType != 'Engineer' && userType != 'Operator' && userType != 'Super Admin') ? null : true">
                      <i class="fas fa-thumbs-down"></i>
                    </button>
                  </div>
                  <button *ngIf="breakdown.status_id == 11 || breakdown.status_id == 13 || breakdown.status_id == 14"
                    type="button" class="btn btn-sm btn-info btn-circle" (click)="downloadBreakdown(breakdown.id)"><i
                      class="far fa-file-pdf"></i>
                  </button>
                </td>
                <td class="option-btn">
                  <i class="fas fa-ellipsis-v" (click)="viewMore($event)" style="cursor: pointer;"></i>
                  <div class="circles">
                    <div class="view-circle"
                      *ngIf="((breakdown.status_id == 1) && (userType == 'Admin' || userType == 'Plant Head' || userType == 'Department Head'))">
                      <i class="far fa-trash-alt" (click)="openComment(breakdown.id, 14,'', breakdown)"></i>

                    </div>
                    <div class="view-circle"
                      *ngIf="((breakdown.status_id == 1 && loginId == breakdown.created_by_id && breakdown.engineer_id == '') || (breakdown.engineer_id == 0 && userType == 'Head/Engineer'))">
                      <i class="fa fa-times" (click)="openComment(breakdown.id, 13,'',breakdown)"></i>
                    </div>
                    <div class="view-circle"
                      *ngIf="breakdown.status_id != 10 && breakdown.status_id != 13 &&breakdown.status_id != 11 && breakdown.status_id != 6">
                      <i class="fas fa-comments"
                        (click)="openComment(breakdown.id, breakdown.status_id, breakdown.engineer_id, breakdown)"></i>
                    </div>
                    <div class="view-circle">
                      <i class="fa fa-eye" (click)="getBreakdownList('', breakdown.id)"></i>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="card" *ngIf="isBreakdownDtl">
    <div class="card-header p-2">
      <h3 class="card-title mb-0 mt-1">Breakdown</h3>
      <div class="card-tools mr-2">
        <button class="btn btn-info btn-sm" (click)="backToList()">Back</button>
      </div>
    </div>
    <div class="card-body pl-2 pr-3 pt-2 pb-2">
      <div class="row">
        <div class="col-sm-4">
          <div class="timeline mb-0">
            <div>
              <i class="fa fa-list bg-primary" title="Detail View" style="cursor: pointer;"
                (click)="getWorkLogDetail()"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Raised Date :
                    {{ breakdownDetail.created_on | date : 'dd-MM-yyyy HH:mm:ss' }}
                  </h6>
                  <h6> Comments : {{ breakdownDetail.open_comment }} </h6>
                  <h6> Status : Open</h6>
                  <h6> Raised By : {{ breakdownDetail.created_by }} </h6>
                </div>
              </div>
            </div>
            <div *ngIf="breakdownDetail.status_id == 13">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <!-- <h6> Cancel Date : {{ breakdownDetail }} </h6> -->
                  <h6> Comments : {{ breakdownDetail.cancel_comment }} </h6>
                  <h6> status : Cancel</h6>
                  <h6> Cancelled By : {{ breakdownDetail.created_by }} </h6>
                </div>
              </div>
            </div>
            <div *ngIf="breakdownDetail.reassign_by_1 != ''">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Reassign Date :
                    {{ breakdownDetail.reassign_time_1 | date:'dd-MM-yyyy HH:mm:ss' }}
                  </h6>
                  <h6> Comments : {{ breakdownDetail.reassign_comment_1 }} </h6>
                  <h6> status : Reassign</h6>
                  <h6> Reassign Engineer : {{ breakdownDetail.reassign_engineer_id_1 }} </h6>
                  <h6> Reassign By : {{ breakdownDetail.reassign_by_1 }} </h6>
                </div>
              </div>
            </div>
            <div *ngIf="breakdownDetail.reassign_by_2 != ''">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Reassign Date - 2 :
                    {{ breakdownDetail.reassign_time_2 | date:'dd-MM-yyyy HH:mm:ss' }}
                  </h6>
                  <h6> Comments : {{ breakdownDetail.reassign_comment_2 }} </h6>
                  <h6> status : Reassign</h6>
                  <h6> Reassign Engineer : {{ breakdownDetail.reassign_engineer_id_2 }} </h6>
                  <h6> Reassign By : {{ breakdownDetail.reassign_by_2 }} </h6>
                </div>
              </div>
            </div>
            <div *ngIf="breakdownDetail.reassign_by_3 != ''">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Reassign Date - 3 :
                    {{ breakdownDetail.reassign_time_3 | date:'dd-MM-yyyy HH:mm:ss' }}
                  </h6>
                  <h6> Comments : {{ breakdownDetail.reassign_comment_3 }} </h6>
                  <h6> status : Reassign</h6>
                  <h6> Reassign Engineer : {{ breakdownDetail.reassign_engineer_id_3 }} </h6>
                  <h6> Reassign By : {{ breakdownDetail.reassign_by_3 }} </h6>
                </div>
              </div>
            </div>
            <div
              *ngIf="breakdownDetail.status_id > 1 && breakdownDetail.status_id != 5 && breakdownDetail.status_id != 13">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Assigned Date :
                    {{ breakdownDetail.assign_begin_time == "1900-01-01T00:00:00" ? '00-00-0000 00-00-00' :  (breakdownDetail.assign_begin_time | date: 'dd-MM-yyyy HH:mm:ss') }}
                  </h6>
                  <h6> Comments : {{ breakdownDetail.assigned_comment }} </h6>
                  <h6> Status : Assign</h6>
                  <h6> Assigned By : {{ breakdownDetail.assign_by }} </h6>
                  <h6> Assigned To : {{ breakdownDetail.assigned_to_engineer }} </h6>
                </div>
              </div>
            </div>
            <div
              *ngIf="breakdownDetail.status_id > 2 && breakdownDetail.status_id != 5 && breakdownDetail.status_id != 13">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Accepted Date :
                    {{ breakdownDetail.ack_begin_time == "1900-01-01T00:00:00" ? '00-00-0000 00-00-00' :  (breakdownDetail.ack_begin_time | date: 'dd-MM-yyyy HH:mm:ss') }}
                  </h6>
                  <h6> Comments : {{ breakdownDetail.accept_comment }} </h6>
                  <h6> Status : Accept</h6>
                  <h6> Accepted By : {{ breakdownDetail.assigned_to_engineer }} </h6>
                </div>
              </div>
            </div>
            <div
              *ngIf="breakdownDetail.status_id >= 6 && breakdownDetail.status_id != 12 && breakdownDetail.status_id != 13 && breakdownDetail.status_id != 14">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Check In Time :
                    {{ breakdownDetail.first_check_in_time == "1900-01-01T00:00:00" ? '00-00-0000 00-00-00' :  (breakdownDetail.first_check_in_time | date: 'dd-MM-yyyy HH:mm:ss') }}
                  </h6>
                  <h6> Check Out Time :
                    <span *ngIf="breakdownDetail.status_id > 6">
                      {{ breakdownDetail.last_check_out_time == "1900-01-01T00:00:00" ? '00-00-0000 00-00-00' :  (breakdownDetail.last_check_out_time | date: 'dd-MM-yyyy HH:mm:ss') }}
                    </span>
                  </h6>
                  <h6> Status : <span *ngIf="breakdownDetail.status_id == 6">Check In</span>
                    <span *ngIf="breakdownDetail.status_id > 6">Check Out</span>
                  </h6>
                  <h6> Engineer : {{ breakdownDetail.assigned_to_engineer }} </h6>
                </div>
              </div>
            </div>
            <div *ngIf="breakdownDetail.status_id > 9 && breakdownDetail.status_id != 13">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Completed Date :
                    {{ breakdownDetail.complete_begin_time == "1900-01-01T00:00:00" ? '00-00-0000 00-00-00' :  (breakdownDetail.complete_begin_time | date: 'dd-MM-yyyy HH:mm:ss') }}
                  </h6>
                  <h6> Comments : {{ breakdownDetail.check_out_comment }} </h6>
                  <h6> Status : Complete</h6>
                  <h6> Engineer : {{ breakdownDetail.assigned_to_engineer }} </h6>
                </div>
              </div>
            </div>
            <div class="mb-0" *ngIf="breakdownDetail.status_id == 11">
              <i class="fa fa-check bg-green"></i>
              <div class="timeline-item card-inside">
                <div class="timeline-body">
                  <h6> Fixed Date :
                    {{ breakdownDetail.fixed_begin_time | date:'dd-MM-yyyy HH:mm:ss' }}
                  </h6>
                  <h6> Comments : {{ breakdownDetail.completed_comment }} </h6>
                  <h6> Status : Fixed</h6>
                  <h6> Acknowledge By : {{ breakdownDetail.fixed_by }} </h6>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-8 p-0" style="background: #f1f1f1;">
          <div class="text-center mt-2 mb-2 d-flex">
            <div style="width: 75%"
              *ngIf="breakdownDetail.status_id == 3 || breakdownDetail.status_id == 6 || breakdownDetail.status_id == 8 || breakdownDetail.status_id == 9">
              <button type="button" class="btn btn-sm mr-3"
                [ngClass]="(breakdownDetail.status_id == 3 || breakdownDetail.status_id == 8 || breakdownDetail.status_id == 9) ? 'btn-success' : 'btn-danger'"
                (click)="updateTicket(breakdownDetail.id, 6, breakdownDetail.engineer_id)"
                [attr.disabled]="(breakdownDetail.engineer_id == loginId && (breakdownDetail.status_id == 3 || breakdownDetail.status_id == 8 || breakdownDetail.status_id == 9)) ? null : true">
                Check In
              </button>
              <button type="button" class="btn btn-sm"
                [ngClass]="breakdownDetail.status_id == 6 ? 'btn-success' : 'btn-danger'"
                (click)="showBreakdownStatus()"
                [attr.disabled]="(breakdownDetail.engineer_id == loginId && breakdownDetail.status_id == 6) ? null : true">
                Check Out
              </button>
            </div>
            <div class="text-right" style="width: 25%"
              *ngIf="breakdownDetail.status_id == 2 || breakdownDetail.status_id == 3 || breakdownDetail.status_id == 6 || breakdownDetail.status_id == 8 || breakdownDetail.status_id == 9">
              <button type="button" class="btn btn-sm btn-primary mr-2"
                (click)="openComment(breakdownDetail.id, 5, breakdownDetail.engineer_id,breakdownDetail)"
                [attr.disabled]="breakdownDetail.reassign_by_3 != '' ? true : (((userType != 'Engineer' && userType != 'Operator' && userType != 'Super Admin') || breakdownDetail.engineer_id == loginId) && (breakdownDetail.engineer_id != 0)) ? null : true">
                Reassign</button>
            </div>
          </div>
          <form id="check_out_form" class="check_out_form" autocomplete="off">
            <div class="col-sm-12 form-group row" *ngIf="isCheckOut">
              <div class="col-sm-2"></div>
              <label for="checkout_comment" class="col-sm-2 text-right">Comments</label>
              <div class="col-sm-6">
                <textarea rows="2" class="form-control form-control-sm required" name="checkout_comment"
                  id="checkout_comment" [(ngModel)]="checkOutComment"></textarea>
              </div>
              <div class="col-sm-2"></div>
            </div>
            <div class="d-flex align-items-center justify-content-center" *ngIf="isCheckOut">
              <label class="mb-0 mr-2"> <b> Breakdown Status </b></label>
              <div class="custom-control custom-radio mr-2">
                <input class="custom-control-input required" type="radio" name="check_out" id="check_out_hold"
                  value="hold" />
                <label for="check_out_hold" class="custom-control-label">Hold</label>
              </div>
              <div class="custom-control custom-radio mr-2">
                <input class="custom-control-input required" type="radio" name="check_out" id="check_out_pending"
                  value="pending" />
                <label for="check_out_pending" class="custom-control-label">Pending</label>
              </div>
              <div class="custom-control custom-radio">
                <input class="custom-control-input" type="radio" name="check_out" id="check_out_complete"
                  value="complete" />
                <label for="check_out_complete" class="custom-control-label">Complete</label>
              </div>
            </div>

            <div class="row align-items-center justify-content-center mb-2"
              *ngIf="(isComplete || breakdownDetail.status_id >= 10)">
              <h6 class="mb-0">Downtime : {{ breakdownDetail.downtime_duration | timeFormat }}</h6>
              <div class="col-sm-4" *ngIf="isDowntimeEdit">
                <input type="text" class="form-control form-control-sm" id="downtime_edit" placeholder="00:00:00"
                  name="downtime_edit" [(ngModel)]="actualDowntime" />
              </div>
            </div>
          </form>
          <ul class="nav nav-tabs pt-2" style="background: #ebebeb;">
            <li class="nav-item">
              <a class="nav-link pb-1 active" data-toggle="pill" href="#general" role="tab">General</a>
            </li>
            <li class="nav-item" *ngIf="breakdownDetail.status_id >= 6">
              <a class="nav-link pb-1" data-toggle="pill" href="#spare_part" role="tab">Spare Parts</a>
            </li>
            <li class="nav-item" *ngIf="isComplete || breakdownDetail.status_id >= 10">
              <a class="nav-link pb-1" id="solution_bank_div" data-toggle="pill" href="#solution_bank"
                role="tab">Solution Bank</a>
            </li>
            <li class="nav-item" *ngIf="((isComplete || breakdownDetail.status_id >= 10) && isMttr)">
              <a class="nav-link pb-1" id="mttr_div" data-toggle="pill" href="#mttr" role="tab">MTTR</a>
            </li>
            <li class="nav-item" *ngIf="userType != 'Operator'">
              <a class="nav-link pb-1" data-toggle="pill" href="#document" role="tab">Documents</a>
            </li>
            <!-- 
            <li class="nav-item" *ngIf="isComplete">
              <a class="nav-link pb-1" data-toggle="pill" href="#attachments" role="tab">Attachments</a>
            </li> -->
          </ul>
          <div class="tab-content p-2">
            <div class="tab-pane fade show active" id="general">
              <h6 class="bg-light p-2"> Ticket </h6>
              <div class="row pl-3 pr-3">
                <div class="col-sm-4">
                  <p> Ticket </p>
                  <h6> {{ breakdownDetail.ticket_no }} </h6>
                  <p> Breakdown Category </p>
                  <h6> {{ breakdownDetail.breakdown_category }} </h6>
                </div>
                <div class="col-sm-4">
                  <p> Raised By </p>
                  <h6> {{ breakdownDetail.created_by }} </h6>
                  <p> Breakdown </p>
                  <h6> {{ breakdownDetail.breakdown_sub_category }} </h6>
                </div>
                <div class="col-sm-4">
                  <p> Raised Date </p>
                  <h6> {{ breakdownDetail.created_on | date :'dd-MM-yyyy HH:mm:ss' }}
                  </h6>
                  <p> Status </p>
                  <h6> {{ breakdownDetail.status }} </h6>
                </div>
              </div>
              <h6 class="bg-light p-2"> Asset </h6>
              <div class="row pl-3 pr-3">
                <div class="col-sm-4">
                  <p> Plant </p>
                  <h6> {{ breakdownDetail.plant }} </h6>
                  <p> Asset Group </p>
                  <h6> {{ breakdownDetail.asset_group_name }} </h6>
                </div>
                <div class="col-sm-4">
                  <p> Department </p>
                  <h6> {{ breakdownDetail.department }} </h6>
                  <p> Asset </p>
                  <h6> {{ breakdownDetail.asset_no }} - {{ breakdownDetail.asset }} </h6>
                </div>
                <div class="col-sm-4">
                  <p> Location </p>
                  <h6> {{ breakdownDetail.location }} </h6>
                  <p> Status </p>
                  <h6> {{ breakdownDetail.machine_status }} </h6>
                </div>
              </div>
              <!-- 
              <h6 class="bg-light p-2"> User </h6>
              <div class="row pl-3 pr-3">
                <div class="col-sm-4">
                  <p> Engineer </p>
                  <h6> {{ breakdownDetail.assigned_to_engineer }} </h6>
                </div>
                <div class="col-sm-4">
                  <p> Email Id </p>
                  <h6> {{ breakdownDetail.employee_email }} </h6>
                </div>
                <div class="col-sm-4">
                  <p> Contact Number </p>
                  <h6> {{ breakdownDetail.employee_mobile }} </h6>
                </div>
              </div> -->
            </div>
            <div class="tab-pane fade" id="spare_part">
              <div class="col-sm-12">
                <div class="text-right"
                  *ngIf="breakdownDetail.status_id == 6 && breakdownDetail.engineer_id == loginId">
                  <button type="button" class="btn btn-sm btn-primary mb-2" (click)="addSpare()">
                    <i class="fas fa-plus"></i> Spare </button>
                </div>
                <form id="spare_form" name="spare_form" autocomplete="off">
                  <div class="table-responsive bg-white mb-2">
                    <table class="table table-sm text-center mb-0">
                      <thead>
                        <tr>
                          <th width="10%"></th>
                          <th width="40%">Spare</th>
                          <th width="15%">Hand Stock</th>
                          <th width="15%">Unit Price</th>
                          <th width="20%">Quantity</th>
                        </tr>
                      </thead>
                      <tbody id="spare_tbody">
                        <tr *ngFor="let data of spareBreakdownList;let x = index" id="row_{{ x+1 }}">
                          <td class="d-flex justify-content-center align-items-center">
                            <div class="custom-control custom-checkbox">
                              <input class="custom-control-input custom-control-input-info" type="checkbox"
                                id="spare_check_{{ x+1 }}" name="spare_check_{{ x+1 }}" checked="true" disabled />
                              <label for="spare_check_{{ x+1 }}" class="custom-control-label"></label>
                            </div>
                            <button *ngIf="breakdownDetail.status_id == 6" type="button" class="btn text-danger"
                              title="Delete Spare" (click)="deleteSpare((x+1))"><i class="fas fa-trash"></i></button>
                          </td>
                          <td>
                            <div class="select_box mb-0">
                              <input type="hidden" name="spare{{ x+1 }}_id" id="spare{{ x+1 }}_id"
                                value="{{ data.spare_id }}" />
                              <p id="spare{{ x+1 }}_name" class="form_dropdown"
                                [ngClass]="(data.spare_id != '' && breakdownDetail.status_id != 6) && (breakdownDetail.engineer_id != loginId) ? 'disabled' : ''"
                                (click)="loadSpareList((x+1))">
                                {{ data.spare_name }}</p>
                              <i class="fas fa-sort-down dropdown_icon"></i>
                            </div>
                          </td>
                          <td>
                            <input type="hidden" id="hand_stock_{{ x+1 }}" value="{{ data.updated_stock }}" />
                            <p class="m-0" id="available_qty_{{ x+1 }}">{{ data.spare_stock }}</p>
                          </td>
                          <td>
                            <p class="m-0" id="unit_price_{{ x+1 }}">{{ data.spare_unit_price }}</p>
                          </td>
                          <td><input type="number" class="form-control numeric_dot" id="quantity_{{ x+1 }}"
                              name="quantity_{{ x+1 }}" value="{{ data.consumed_qty }}"
                              (input)="checkQuantity((x+1), $event)"
                              [attr.disabled]="breakdownDetail.status_id == 6 ? null : true" /></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="text-center"
                    *ngIf="breakdownDetail.status_id == 6 && breakdownDetail.engineer_id == loginId">
                    <button type="button" class="btn btn-sm btn-info mr-3" (click)="saveSpare()">Save</button>
                    <button type="reset" class="btn btn-sm btn-default" (click)="cancel()">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            <div class="tab-pane fade" id="solution_bank">
              <form id="solution_bank_form" name="solution_bank_form" autocomplete="off">
                <div class="row">
                  <div class="col-sm-2"></div>
                  <div class="col-sm-8 row">
                    <div class="col-sm-6">
                      <h6 class="text-center"><sup><i class="fas fa-asterisk fa-xs text-red"></i></sup>Why</h6>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm required" name="why1" id="why1"
                          [(ngModel)]="why1" />
                      </div>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm" name="why2" id="why2"
                          [(ngModel)]="why2" />
                      </div>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm" name="why3" id="why3"
                          [(ngModel)]="why3" />
                      </div>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm" name="why4" id="why4"
                          [(ngModel)]="why4" />
                      </div>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm" name="why5" id="why5"
                          [(ngModel)]="why5" />
                      </div>
                    </div>
                    <div class="col-sm-6">
                      <h6 class="text-center"><sup><i class="fas fa-asterisk fa-xs text-red"></i></sup>Action</h6>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm required" name="action1" id="action1"
                          [(ngModel)]="action1" />
                      </div>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm" name="action2" id="action2"
                          [(ngModel)]="action2" />
                      </div>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm" name="action3" id="action3"
                          [(ngModel)]="action3" />
                      </div>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm" name="action4" id="action4"
                          [(ngModel)]="action4" />
                      </div>
                      <div class="mb-2">
                        <input type="text" class="form-control form-control-sm" name="action5" id="action5"
                          [(ngModel)]="action5" />
                      </div>
                    </div>
                    <div class="col-sm-12">
                      <div class="form-group row mb-2">
                        <label for="root_cause" class="col-sm-4">Root Cause <sup><i
                              class="fas fa-asterisk fa-xs text-red"></i></sup></label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control form-control-sm required" id="root_cause"
                            name="root_cause" [(ngModel)]="rootCause" />
                        </div>
                      </div>
                      <div class="form-group row mb-2">
                        <label for="solution" class="col-sm-4">Solution<sup><i
                              class="fas fa-asterisk fa-xs text-red"></i></sup></label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control form-control-sm required" id="solution" name="solution"
                            [(ngModel)]="solution" />
                        </div>
                      </div>
                      <div class="form-group row mb-2">
                        <label for="solution_remarks" class="col-sm-4">Remarks</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control form-control-sm" id="solution_remarks"
                            name="solution_remarks" [(ngModel)]="remarks" />
                        </div>
                      </div>
                      <div class="text-center" *ngIf="breakdownDetail.status_id == 6">
                        <button type="button" class="btn btn-sm btn-info mr-3"
                          (click)="saveSolutionBank()">Save</button>
                        <button type="reset" class="btn btn-sm btn-default">Cancel</button>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-2"></div>
                </div>
              </form>
            </div>
            <div class="tab-pane fade" id="mttr">
              <form id="mttr_form" name="mttr_form" autocomplete="off">
                <div class="row align-items-center">
                  <!--  <div class="col-sm-4">
                    <h6 class="mb-0">Downtime : {{ breakdownDetail.downtime_duration }}</h6>
                  </div>
                  <div class="col-sm-4" *ngIf="isDowntimeEdit">
                    <input type="text" class="form-control form-control-sm" id="downtime_edit" placeholder="00:00:00"
                      name="downtime_edit" [(ngModel)]="actualDowntime" />
                  </div>
                  <div class="col-sm-4"></div> -->
                  <div class="col-sm-6">
                    <table class="table table-borderless table-sm text-center mt-2">
                      <thead>
                        <tr>
                          <th style="vertical-align: middle;">MTTR Name</th>
                          <th style="vertical-align: middle;">MTTR Value <br> (HH:MM:SS)</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let data of mttrList;let x = index">
                          <td class="text-left">
                            <input type="hidden" id="mttr_{{ x+1 }}_id" value="{{ data.mttr_id }}">{{ data.mttr_name }}
                          </td>
                          <td><input type="text" name="mttr_value{{ x+1 }}" id="mttr_value{{ x+1 }}"
                              class="form-control form-control-sm" placeholder="00:00:00"
                              value="{{ data.mttr_value | timeFormat }}"
                              [attr.disabled]="breakdownDetail.status_id == 6 ? null : true" /></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </form>
              <div class="text-center" *ngIf="breakdownDetail.status_id == 6">
                <button type="button" class="btn btn-sm btn-info mr-3" (click)="saveMttr()">Save</button>
                <button type="reset" class="btn btn-sm btn-default" (click)="cancel()">Cancel</button>
              </div>
            </div>
            <div class="tab-pane fade" id="document">
              <div class="table-responsive" style="height: 80vh">
                <table id="document_dataTable" class="table table-sm table-bordered">
                  <thead>
                    <tr>
                      <th> Document Name </th>
                      <th> Document </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let data of documentList ">
                      <td> {{ data.document_name }} </td>
                      <td><button type="button" title="{{ data.document_name }}" class="btn btn-sm btn-outline-success"
                          (click)="documentShow(data)"><i class="fas fa-eye"></i>
                        </button>
                      </td>
                      <!-- <td>{{ data.spare_quantity }}</td> -->
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="col-sm-12" style="display: none;">
  <table class="table table-bordered" id="pdf_breakdown">
    <tbody>
      <tr>
        <th class="pdf-title" colspan="4"> BREAKDOWN REPORT </th>
      </tr>
      <tr>
        <th class="head" colspan="4"> BREAKDOWN INFO </th>
      </tr>
      <tr>
        <th>Ticket</th>
        <td>{{ breakdownDetail.ticket_no }}</td>
        <th>Breakdown</th>
        <td>{{ breakdownDetail.breakdown_sub_category }}</td>
      </tr>
      <tr>
        <th>Priority</th>
        <td>{{ breakdownDetail.priority }}</td>
        <th>Status</th>
        <td>{{ breakdownDetail.status }}</td>
      </tr>
      <tr>
        <th>Raised Date</th>
        <td>{{ breakdownDetail.created_on | date: 'dd-MM-yyyy HH:mm:ss' }}
        </td>
        <th>Raised By</th>
        <td>{{ breakdownDetail.created_by }}</td>
      </tr>
      <tr>
        <th>Completed Date</th>
        <td>
          {{ breakdownDetail.last_check_out_time | date: 'dd-MM-yyyy HH:mm:ss' }}
        </td>
        <th>Completed By</th>
        <td>{{ breakdownDetail.assigned_to_engineer }}</td>
      </tr>
      <tr>
        <th> Total Consumed Time </th>
        <td>{{ breakdownDetail.complete_duration | timeFormat }}</td>
        <th> Downtime </th>
        <td>{{ breakdownDetail.downtime_duration | timeFormat }}</td>
      </tr>
      <tr>
        <th *ngIf="breakdownDetail.cancel_comment != ''">Cancelled Reason</th>
        <td *ngIf="breakdownDetail.cancel_comment != ''">{{ breakdownDetail.cancel_comment }}</td>
        <th *ngIf="breakdownDetail.reopen_comment != ''">Reopen Reason</th>
        <td *ngIf="breakdownDetail.reopen_comment != ''">{{ breakdownDetail.reopen_comment }}</td>
      </tr>
      <tr>
        <th class="head" colspan="4"> ASSET DETAILS </th>
      </tr>
      <tr>
        <th> Plant </th>
        <td>{{ breakdownDetail.plant }}</td>
        <th>Department</th>
        <td>{{ breakdownDetail.department }}</td>
      </tr>
      <tr>
        <th>Location</th>
        <td>{{ breakdownDetail.location }}</td>
        <th> Asset Group </th>
        <td>{{ breakdownDetail.asset_group_name }}</td>
      </tr>
      <tr>
        <th>Asset </th>
        <td>{{ breakdownDetail.asset }}</td>
        <th>Asset Status</th>
        <td>{{ breakdownDetail.machine_status }}</td>
      </tr>
      <tr>
        <th colspan="4" class="head"> SPARE UTILIZATION </th>
      </tr>
      <tr *ngFor="let data of spareBreakdownList">
        <th>Spare Name</th>
        <td *ngIf="data.spare_name != 'Select Spare'">{{ data.spare_name }}</td>
        <td *ngIf="data.spare_name == 'Select Spare'">-</td>
        <th>Consumed Quantity</th>
        <td *ngIf="data.spare_name == 'Select Spare'">-</td>
        <td *ngIf="data.spare_name != 'Select Spare'">{{ data.consumed_qty }}</td>
      </tr>
      <tr>
        <th colspan="4" class="head"> SOLUTION BANK </th>
      </tr>
      <tr *ngIf="breakdownDetail.why1 != ''">
        <th>Why - 1</th>
        <td>{{ breakdownDetail.why1 }}</td>
        <th>Action - 1</th>
        <td>{{ breakdownDetail.action1 }}</td>
      </tr>
      <tr *ngIf="breakdownDetail.why2 != ''">
        <th>Why - 2</th>
        <td>{{ breakdownDetail.why2 }}</td>
        <th>Action - 2</th>
        <td>{{ breakdownDetail.action2 }}</td>
      </tr>
      <tr *ngIf="breakdownDetail.why3 != ''">
        <th>Why - 3</th>
        <td>{{ breakdownDetail.why3 }}</td>
        <th>Action - 3</th>
        <td>{{ breakdownDetail.action3 }}</td>
      </tr>
      <tr *ngIf="breakdownDetail.why4 != ''">
        <th>Why - 4</th>
        <td>{{ breakdownDetail.why4 }}</td>
        <th>Action - 4</th>
        <td>{{ breakdownDetail.action4 }}</td>
      </tr>
      <tr *ngIf="breakdownDetail.why5 != ''">
        <th>Why - 5</th>
        <td>{{ breakdownDetail.why5 }}</td>
        <th>Action - 5</th>
        <td>{{ breakdownDetail.action5 }}</td>
      </tr>
      <tr>
        <th> Root Cause </th>
        <td>{{ breakdownDetail.root_cause }}</td>
        <th>Solution</th>
        <td>{{ breakdownDetail.solution }}</td>
      </tr>
      <tr>
        <th>Acknowledge Date</th>
        <td>
          {{ breakdownDetail.fixed_begin_time | date: 'dd-MM-yyyy HH:mm:ss' }}
        </td>
        <th>Acknowledge By</th>
        <td>{{ breakdownDetail.fixed_by }}</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Create Ticket -->
<div class="modal fade" id="create_ticket" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content light">
      <div class="modal-header bg-info p-1 pl-2 pr-3">
        <h6 class="modal-title">
          <span class="pl-2 text-white"> <i class="fas fa-ticket-alt ml-1"></i> Create Ticket</span>
        </h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="modal_close" (click)="cancel()">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <form id="create_breakdown" name="create_breakdown" method="post" autocomplete="off">
        <div class="modal-body p-3" style="height: 75vh;overflow-y: auto;">
          <div class="row">
            <div class="col-sm-6">
              <div class="select_box">
                <input type="hidden" name="company_id" id="company_id" value="" />
                <p id="company_name" class="form_dropdown" (click)="loadSelectBox('company')"> Select Company</p>
                <i class="fas fa-sort-down dropdown_icon"></i>
              </div>
              <div class="select_box">
                <input type="hidden" name="plant_id" id="plant_id" value="" />
                <p id="plant_name" class="form_dropdown" (click)="loadSelectBox('plant')"> Select Plant</p>
                <i class="fas fa-sort-down dropdown_icon"></i>
              </div>
              <div class="select_box">
                <input type="hidden" name="location_id" id="location_id" value="" />
                <p id="location_name" class="form_dropdown" (click)="loadSelectBox('location')"> Select Location</p>
                <i class="fas fa-sort-down dropdown_icon"></i>
              </div>
              <div class="select_box">
                <input type="hidden" name="asset_id" id="asset_id" value="" />
                <p id="asset_name" class="form_dropdown" (click)="loadSelectBox('asset')"> Select Asset</p>
                <i class="fas fa-sort-down dropdown_icon"></i>
                <label class="is_error text-danger" id="asset_error" style="display: none;">This field is
                  required</label>
              </div>
              <div class="select_box">
                <input type="hidden" name="breakdown_category_id" id="breakdown_category_id" value="" />
                <p id="breakdown_category_name" class="form_dropdown" (click)="loadSelectBox('breakdown_category')">
                  Select Breakdown Category</p>
                <i class="fas fa-sort-down dropdown_icon"></i>
              </div>
              <div class="form-group row pl-1 pr-1 mb-0">
                <p for="asset_status" class="col-sm-4 mt-1">Asset Status</p>
                <div class="col-sm-8">
                  <div class="d-flex">
                    <label class="yes_no">
                      <input type="radio" name="asset_status" id="run" value="1">
                      <span class="check"></span>Complaint
                    </label>
                    <label class="yes_no ml-3">
                      <input type="radio" name="asset_status" id="stop" value="0">
                      <span class="check"></span> Stopped
                    </label>
                  </div>
                  <label class="is_error text-danger" id="asset_status_error" style="display: none;">This field is
                    required</label>
                </div>
              </div>
              <div class="form-group row pl-1 pr-1 mb-0">
                <p for="asset_status" class="col-sm-2 mt-1">Priority:</p>
                <div class="col-sm-10 mt-1">
                  <div class="d-flex justify-content-start align-items-center">
                    <div class="custom-control custom-radio mr-2">
                      <input class="custom-control-input" type="radio" id="create_low_priority"
                        name="create_breakdown_priority" value="Low" required>
                      <label for="create_low_priority" class="custom-control-label">Low</label>
                    </div>
                    <div class="custom-control custom-radio mr-2">
                      <input class="custom-control-input" type="radio" id="create_medium_priority"
                        name="create_breakdown_priority" value="Medium" checked>
                      <label for="create_medium_priority" class="custom-control-label">Medium</label>
                    </div>
                    <div class="custom-control custom-radio">
                      <input class="custom-control-input" type="radio" id="create_high_priority"
                        name="create_breakdown_priority" value="High">
                      <label for="create_high_priority" class="custom-control-label">High</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="select_box">
                <input type="hidden" name="bu_id" id="bu_id" value="" />
                <p id="bu_name" class="form_dropdown" (click)="loadSelectBox('bu')"> Select BU</p>
                <i class="fas fa-sort-down dropdown_icon"></i>
              </div>
              <div class="select_box">
                <input type="hidden" name="department_id" id="department_id" value="" />
                <p id="department_name" class="form_dropdown" (click)="loadSelectBox('department')"> Select Department
                </p>
                <i class="fas fa-sort-down dropdown_icon"></i>
              </div>
              <div class="select_box">
                <input type="hidden" name="asset_group_id" id="asset_group_id" value="" />
                <p id="asset_group_name" class="form_dropdown" (click)="loadSelectBox('asset_group')"> Select Asset
                  Group</p>
                <i class="fas fa-sort-down dropdown_icon"></i>
              </div>
              <div class="form-group">
                <input type="text" class="form-control" name="qr_code" id="qr_code" value=""
                  (blur)="getAssetBasedBreakdown()" placeholder="QR code" />
              </div>
              <div class="select_box">
                <input type="hidden" name="breakdown_id" id="breakdown_id" value="" />
                <p id="breakdown_name" class="form_dropdown" (click)="loadSelectBox('breakdown')"> Select Breakdown </p>
                <i class="fas fa-sort-down dropdown_icon"></i>
                <label class="is_error text-danger" id="breakdown_error" style="display: none;">This field is
                  required</label>
              </div>
              <!-- <h6 class="mt-4 mb-0 text-danger">Responsible Engineer : <span id="res_engineer"></span></h6> -->
            </div>
          </div>
        </div>
        <div class="modal-footer text-right p-1">
          <button type="button" class="btn btn-sm btn-primary" (click)="saveTicket()">Create</button>
          <button type="reset" class="btn btn-sm btn-default" (click)="cancel()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Comment Ticket -->
<div class="modal fade" id="comment_modal" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content light">
      <div class="modal-header bg-info p-1 pl-2 pr-3">
        <h6 class="modal-title">
          <span class="pl-2 text-white"> Comments </span>
        </h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="cancel()">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <form id="create_breakdown" name="create_breakdown" method="post">
        <div class="modal-body p-3">
          <textarea rows="3" class="form-control form-control-sm" name="comment_desc" id="comment_desc"
            [(ngModel)]="comments"></textarea>
        </div>
        <div class="modal-footer text-right p-1">
          <button type="button" class="btn btn-sm btn-primary"
            (click)="updateTicket(ticketId, breakdownStatusId)">Save</button>
          <button type="reset" class="btn btn-sm btn-default"
            (click)="closeComment(ticketId, breakdownStatusId)">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Assign Engineer to Breakdown -->
<div class="modal fade" id="assign_modal" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content light">
      <div class="modal-header bg-info p-1 pl-2 pr-3">
        <h6 class="modal-title">
          <span class="pl-2 text-white"> Assign Engineer</span>
        </h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="modal_close" (click)="cancel()">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <form id="assign_engineer" name="assign_engineer" method="post">
        <div class="modal-body p-3">
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group row">
                <label class="col-sm-2 mb-0"><b>Priority</b></label>
                <div class="col-sm-10 d-flex justify-content-start align-items-center">
                  <div class="custom-control custom-radio mr-2">
                    <input class="custom-control-input" type="radio" id="low_priority" name="breakdown_priority"
                      value="Low" [(ngModel)]="priority" required>
                    <label for="low_priority" class="custom-control-label">Low</label>
                  </div>
                  <div class="custom-control custom-radio mr-2">
                    <input class="custom-control-input" type="radio" id="medium_priority" name="breakdown_priority"
                      value="Medium" [(ngModel)]="priority">
                    <label for="medium_priority" class="custom-control-label">Medium</label>
                  </div>
                  <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="high_priority" name="breakdown_priority"
                      value="High" [(ngModel)]="priority">
                    <label for="high_priority" class="custom-control-label">High</label>
                  </div>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-2 mb-0"><b>Assign Type</b></label>
                <div class="col-sm-10 d-flex justify-content-start align-items-center">
                  <div class="custom-control custom-radio mr-2">
                    <input class="custom-control-input" type="radio" id="singleAssign" name="assignType" value="Single"
                      required>
                    <label for="singleAssign" class="custom-control-label">Single</label>
                  </div>
                  <div class="custom-control custom-radio" *ngIf="isMultiple">
                    <input class="custom-control-input" type="radio" id="multipleAssign" name="assignType"
                      value="Multiple">
                    <label for="multipleAssign" class="custom-control-label">Multiple</label>
                  </div>
                </div>
              </div>
              <div class="form-group row" id="is_engineer" style="display: none;">
                <label for="engineer_name" class="col-sm-4">Engineer</label>
                <div class="col-sm-8">
                  <select class="chosen" id="engineer_id" name="engineer_id" style="width: 100% !important">
                    <option value="">Select Engineer</option>
                    <option *ngFor="let data of engineerList" value="{{ data.employee_id }}">{{ data.employee_code }} -
                      {{ data.employee_name }}</option>
                  </select>
                </div>
              </div>
              <div class="form-group row" id="is_multi_engineer" style="display: none;">
                <label for="engineer_name" class="col-sm-4">Engineer</label>
                <div class="col-sm-8">
                  <select class="select2" id="multi_engineer_id" name="multi_engineer_id" multiple
                    style="width: 100% !important">
                    <option *ngFor="let data of engineerList" value="{{ data.employee_id }}">{{ data.employee_code }} -
                      {{ data.employee_name }}</option>
                  </select>
                </div>
              </div>
              <div class="form-group row" id="is_multiple_assign" style="display: none;">
                <label for="responsible_owner" class="col-sm-4">Responsible Owner</label>
                <div class="col-sm-8">
                  <select class="chosen" id="responsible_owner" name="responsible_owner">
                    <option value=""> Select Engineer </option>ownerEngineerList
                    <option *ngFor="let data of ownerEngineerList" value="{{ data.employee_id }}">
                      {{ data.employee_name }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer text-right p-1">
          <button type="button" class="btn btn-sm btn-primary" (click)="assignEngineer()">Assign</button>
          <button type="reset" class="btn btn-sm btn-default" (click)="cancel()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Dropdown View -->
<div class="modal fade" id="spare_list_modal" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body p-2">
        <button type="button" class="close float-right" (click)="closeModal('spare')" data-dismiss="modal"
          aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h5 class="mb-3 text-info">Spare</h5>

        <ul class="nav nav-tabs pt-2" style="background: #ebebeb;">
          <li class="nav-item">
            <a class="nav-link pb-1 active" data-toggle="pill" href="#map_spare" role="tab">Mapping Spares</a>
          </li>
          <li class="nav-item">
            <a class="nav-link pb-1" data-toggle="pill" href="#general_spare" role="tab">General Spares</a>
          </li>
        </ul>
        <div class="tab-content p-2">
          <div class="tab-pane fade show active" id="map_spare">
            <div class="col-sm-12" style="position: relative;top: 0">
              <input type="text" id="spare_search_box" (keyup)="searchSelectBox('spare_search_box','spare_list')"
                placeholder="Search ..." class="form-control"
                style="background: #dbdbdb;border:1px solid #ddd !important;padding-left: 2rem;" />
              <i class="fas fa-search" style="position: absolute;top: 33%;left: 2%;color: #888"></i>
            </div>
            <ul class="search_dropdown" id="spare_list" *ngIf="spareMappingList.length > 0; else noData">
              <li *ngFor="let item of spareMappingList" (click)="updateSpare(item)"> {{ item.spare_code }} -
                {{ item.spare_name }}
              </li>
            </ul>
            <ng-template #noData>
              <h5 class="text-center mt-2"> No Data Available </h5>
            </ng-template>
          </div>
          <div class="tab-pane fade" id="general_spare">
            <div class="col-sm-12" style="position: relative;top: 0">
              <input type="text" id="general_spare_box"
                (keyup)="searchSelectBox('general_spare_box','general_spare_list')" placeholder="Search ..."
                class="form-control" style="background: #dbdbdb;border:1px solid #ddd !important;padding-left: 2rem;" />
              <i class="fas fa-search" style="position: absolute;top: 33%;left: 2%;color: #888"></i>
            </div>
            <ul class="search_dropdown" id="general_spare_list" *ngIf="spareGeneralList.length > 0; else noInfo">
              <li *ngFor="let data of spareGeneralList" (click)="updateSpare(data)"> {{ data.spare_code }} -
                {{ data.spare_name }}
              </li>
            </ul>
            <ng-template #noInfo>
              <h5 class="text-center mt-2"> No Data Available </h5>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Dropdown View -->
<div class="modal fade" id="list_view_popup" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body p-2">
        <button type="button" class="close float-right" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h5 class="mb-3 text-info">{{ listTitle }}</h5>
        <div class="col-sm-12" style="position: relative;top: 0" *ngIf="listTitle != 'UOM'">
          <input type="text" id="search_box" (keyup)="searchSelectBox('search_box','dropdown')" placeholder="Search ..."
            class="form-control" style="background: #dbdbdb;border:1px solid #ddd !important;padding-left: 2rem;" />
          <i class="fas fa-search" style="position: absolute;top: 33%;left: 2%;color: #888"></i>
        </div>
        <ul class="search_dropdown" id="dropdown" *ngIf="dropdownList.length > 0; else noData">
          <li *ngFor="let item of dropdownList"
            (click)="updateSelectBox(item.reason_id, item.reason_name, item.reason_div_id)">
            {{ item.reason_name }}
          </li>
        </ul>
        <ng-template #noData>
          <h5 class="text-center mt-2"> No Data Available </h5>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<!-- Under Development -->
<div class="modal fade" id="under_development">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header p-1 pl-2 pr-3">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="modal_close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <div class="card-body text-center">
        <h4 class="text-info">Under Development</h4>
        <p class="text-black"> This option is for the table and grid view of the <b>Breakdown</b> which was on hold.</p>
      </div>
    </div>
  </div>
</div>

<!-- Document View -->
<div class="modal fade" id="modal_docs">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header p-1 pl-2 pr-2">
        <h4 class="modal-title"> Documents </h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">
            &times;
          </span>
        </button>
      </div>
      <div class="modal-body text-center">
        <iframe id="document_manual" src="assets/images/dummy.pdf" width="100%" style="border: none"></iframe>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>

<!-- Work Log Detail View  -->
<div class="modal fade" id="work_log" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content light">
      <div class="modal-header bg-info p-1 pl-2 pr-3">
        <h6 class="modal-title">
          <span class="pl-2 text-white"> <i class="fas fa-ticket-alt ml-1"></i> Work Log</span>
        </h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="modal_close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <div class="modal-body" style="height: 75vh;overflow-y: auto;">
        <div class="table-responsive" style="height: 70vh;">
          <table class="table table-sm table-bordered">
            <thead class="text-center">
              <tr>
                <th width="10%"> Status </th>
                <th width="20%"> Time </th>
                <th width="20%"> Action Done By </th>
                <th width="20%"> Engineer </th>
                <th width="30%"> Comment </th>
              </tr>
            </thead>
            <tbody *ngIf="logDetailList.length > 0; else noData">
              <tr *ngFor="let data of logDetailList">
                <td>{{ data.type }}</td>
                <td>{{ data.date_time | date:'dd-MM-yyyy HH:mm:ss' }}</td>
                <td>{{ data.login_user_name }}</td>
                <td>{{ data.assigned_to_engineer_name }}</td>
                <td>{{ data.comment }}</td>
              </tr>
            </tbody>
            <ng-template #noData>
              <tbody>
                <tr>
                  <td colspan="45" class="text-center">No Data Available </td>
                </tr>
              </tbody>
            </ng-template>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
